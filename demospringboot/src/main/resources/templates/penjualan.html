<!DOCTYPE html>
<html lang="en">

<head>
    <title>Halaman Penjualan</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/home.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/table.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/form.css}">
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Halaman Penjualan</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/home.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/table.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/form.css}">
</head>

<body>
    <div class="first-box">
        <h2>Daftar Penjualan</h2>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Kode</th>
                    <th>PIC</th>
                    <th>Jumlah</th>
                    <th>Tanggal</th>
                    <th>Harga Jual</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody th:each="d, no : ${penjualanList}">
                <tr>
                    <td th:text="${no.count}"></td>
                    <td th:text="'sale000' + ${d.getSaleID}"></td>
                    <td th:text="${d.person.name}"></td>
                    <td th:text="${d.getJumlah()}"></td>
                    <td th:text="${#temporals.format(d.getTanggal(), 'dd MMM yyyy HH:mm:ss')}"></td>
                    <td th:text="${#strings.replace(#numbers.formatCurrency(d.getHargaJual()),'.00','')}"></td>
                    <td>
                        <a th:href="@{/penjualan/edit(id=${d.getSaleID})}" class="btn btn-info" style="padding: 5px 10px; font-size: 12px;">Edit</a>
                        <a th:href="@{/penjualan/delete(id=${d.getSaleID})}" class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;"
                           th:data-confirm-delete="|Are you sure you want to delete sale000${d.getSaleID}?|"
                           onclick="if (!confirm(this.getAttribute('data-confirm-delete'))) return false">Hapus</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="second-box">
        <div id="feedback-form">
            <h2 class="header" th:text="${penjualanRec != null} ? 'Edit Penjualan' : 'Input Penjualan Baru'"></h2>
            
            <form action="/penjualan" method="post" class="form-group">
                <!-- Hidden ID for Edit -->
                <input type="hidden" name="saleID" th:value="${penjualanRec?.getSaleID}">

                <label for="person" class="form-label">PIC</label>
                <select id="person" name="person" required>
                    <option value="" disabled selected>Pilih PIC</option>
                    <option th:each="d: ${personList}" th:value="${d.getId()}" th:text="${d.getName()}"
                        th:selected="${penjualanRec != null && penjualanRec.getPerson() != null && d.getId() == penjualanRec.getPerson().getId()}">
                    </option>
                </select>

                <br>
                <label for="jumlah" class="form-label">Jumlah Barang</label>
                <input type="number" id="jumlah" name="jumlah" th:value="${penjualanRec?.getJumlah()}" required>
                
                <label for="tanggal" class="form-label">Tanggal Transaksi</label>
                <br>
                <input type="datetime-local" id="tanggal" name="tanggal" th:value="${penjualanRec?.getTanggal()}" required>
                <br>
                
                <label for="hargaJual" class="form-label">Harga Jual</label>
                <input type="number" id="hargaJual" name="hargaJual" th:value="${penjualanRec?.getHargaJual()}" required>
                
                <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Simpan</button>
                <a th:if="${penjualanRec != null}" href="/penjualan" class="btn btn-secondary" style="margin-top: 10px; display:inline-block; text-align:center; text-decoration:none; color:black;">Batal Edit</a>
            </form>
        </div>
    </div>

</body>

</html>